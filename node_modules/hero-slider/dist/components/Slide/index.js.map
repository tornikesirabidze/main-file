{"version":3,"file":"index.js","sources":["../../../src/components/Slide/index.tsx"],"sourcesContent":["import React from 'react';\nimport { useAnimations } from '../../modules/Animations';\nimport ConsoleLogger from '../../modules/ConsoleLogger';\nimport { useController } from '../../modules/Controller';\nimport { useManager } from '../../modules/Manager';\nimport { composeCssClasses } from '../../utils/composeCssClasses';\nimport Background, { BackgroundProps } from './Background';\nimport SlideModuleCss from './index.module.css';\nimport Mask from './Mask';\n\nconst logger = ConsoleLogger.new();\n\n/**\n * `Slide` component props.\n */\nexport interface SlideProps {\n  /**\n   * Slider className.\n   */\n  className?: React.HTMLProps<HTMLDivElement>['className'];\n  /**\n   * Each slide has a \"Mask\" that serves as an adornment.\n   * They mimic the background, then offsets it a bit. It has an animation during slide transitions.\n   * @default false\n   */\n  shouldRenderMask?: boolean;\n  /**\n   * Defines the background of the `Slide`.\n   * You may pass CSS properties just like you would style the background of a regular HTML element.\n   * The main difference is that the `backgroundImage` property will work just like an image `src` property instead of the typical background image URL.\n   */\n  background?: Partial<BackgroundProps>;\n  /**\n   * If the developer is using a `MenuNav` or `ButtonsNav` component, a label for each slide may be passed.\n   * These labels will be shown in the nav components.\n   */\n  label?: string;\n  /**\n   * Inline CSS styling.\n   */\n  style?: React.CSSProperties;\n  /**\n   * Callback that executes when the background image loads.\n   */\n  onBackgroundLoad?: BackgroundProps['onLoad'];\n}\n\nexport function Slide(props: React.PropsWithChildren<SlideProps>) {\n  const {\n    className,\n    shouldRenderMask = false,\n    style,\n    background,\n    onBackgroundLoad,\n    children,\n    label\n  } = props;\n\n  const { getSlide, registerSlide, removeSlide } = useManager();\n\n  const {\n    state: { activeSlide, isSliding, prevActiveSlide, slidingDirection }\n  } = useController();\n\n  const { getSlidingAnimationCssClass } = useAnimations();\n\n  const slideRef = React.useRef<HTMLDivElement>(null);\n\n  const slide = getSlide(slideRef);\n\n  logger.info('[Slide] rerender', 'slide.number: ', slide?.number);\n\n  const [classNames, setClassNames] = React.useState(\n    composeCssClasses('hero-slider-slide', SlideModuleCss.Slide, className)\n  );\n\n  const isActive = activeSlide === slide?.number;\n\n  React.useEffect(() => {\n    if (slide) {\n      setClassNames(\n        composeCssClasses(\n          'hero-slider-slide',\n          SlideModuleCss.Slide,\n          { className: SlideModuleCss.Active, useIf: isActive },\n          { className: SlideModuleCss.Sliding, useIf: isActive && !isSliding },\n          {\n            className: getSlidingAnimationCssClass(\n              slide.number,\n              prevActiveSlide,\n              slidingDirection\n            ),\n            useIf: isActive && isSliding\n          }\n        )\n      );\n    }\n  }, [isActive, isSliding]);\n\n  React.useEffect(() => {\n    if (slideRef) registerSlide(slideRef, label);\n    return () => {\n      if (slideRef) removeSlide(slideRef);\n    };\n  }, []);\n\n  if (!slide) return null;\n\n  /**\n   * CSS variables for the transitions.\n   */\n  const CSSVariables = {\n    '--background-animation-duration': background?.backgroundAnimationDuration\n      ? `${background.backgroundAnimationDuration}ms`\n      : null,\n    '--background-animation-delay': background?.backgroundAnimationDelay\n      ? `${background.backgroundAnimationDelay}ms`\n      : null\n  };\n\n  const isHidden = isSliding\n    ? slide.number !== activeSlide && slide.number !== prevActiveSlide\n    : slide.number !== activeSlide;\n\n  return (\n    <div\n      data-testid={`hero-slider-slide-${slide.number}`}\n      ref={slideRef}\n      hidden={isHidden}\n      className={classNames}\n      style={{\n        ...style,\n        ...CSSVariables\n      }}\n    >\n      <Background {...background} onLoad={onBackgroundLoad} />\n\n      <div\n        className={composeCssClasses(\n          'hero-slider-slide-wrapper',\n          SlideModuleCss.Wrapper\n        )}\n      >\n        {/* Mask */}\n        {shouldRenderMask ? (\n          <Mask background={background} isActive={isActive} />\n        ) : null}\n\n        {/* Container */}\n        <div\n          className={composeCssClasses(\n            'hero-slider-slide-container',\n            SlideModuleCss.Container,\n            {\n              className: SlideModuleCss.Active,\n              useIf: isActive && !isSliding\n            }\n          )}\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n(Slide as React.FunctionComponent).displayName = 'hero-slider/slide';\n"],"names":["ConsoleLogger","useManager","useController","useAnimations","React","composeCssClasses","SlideModuleCss","_jsxs","_jsx","Background","Mask"],"mappings":"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"}